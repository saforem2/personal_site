<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Sam Foreman</title>
<link>https://samforeman.me/posts/2025/</link>
<atom:link href="https://samforeman.me/posts/2025/index.xml" rel="self" type="application/rss+xml"/>
<description>A collection of posts from 2025.</description>
<image>
<url>https://samforeman.me/assets/thumbnail.png</url>
<title>Sam Foreman</title>
<link>https://samforeman.me/posts/2025/</link>
<height>78</height>
<width>144</width>
</image>
<generator>quarto-1.8.17</generator>
<lastBuildDate>Sat, 14 Jun 2025 04:00:00 GMT</lastBuildDate>
<item>
  <title>üèóÔ∏è Building PyTorch 2.8 from Source on Aurora</title>
  <dc:creator>Sam Foreman</dc:creator>
  <link>https://samforeman.me/posts/2025/06/14/</link>
  <description><![CDATA[ 

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TC329HJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->




<section id="shell-environment" class="level2">
<h2 class="anchored" data-anchor-id="shell-environment">üèñÔ∏è Shell Environment</h2>
<ol type="1">
<li><p>Helper function to get timestamp:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tstamp()</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span></span>
<span id="cb1-2">     <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date</span> +<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%Y-%m-%d-%H%M%S"</span></span>
<span id="cb1-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span></code></pre></div></div></li>
<li><p>Load <code>frameworks</code> module:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">module</span> load frameworks</span></code></pre></div></div></li>
<li><p>Deactivate <code>conda</code> environment:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> deactivate</span></code></pre></div></div></li>
<li><p>Create new <code>conda</code> environment:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ENV_PATH</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/flare/datascience/foremans/miniconda/2025-06-15"</span></span>
<span id="cb4-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> create <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--prefix</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ENV_PATH}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--y</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--solver</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>libmamba <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--verbose</span> python=3.12</span>
<span id="cb4-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">conda</span> activate <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ENV_PATH}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div></div></li>
</ol>
</section>
<section id="build-libraries" class="level2">
<h2 class="anchored" data-anchor-id="build-libraries">üî® Build Libraries</h2>
<section id="pytorch" class="level3">
<h3 class="anchored" data-anchor-id="pytorch">PyTorch</h3>
<ol type="1">
<li><p>Clone <a href="https://github.com/pytorch/pytorch">pytorch/<code>pytorch</code></a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/pytorch/pytorch</span>
<span id="cb5-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> pytorch</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> submodule sync</span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> submodule update <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--init</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--recursive</span></span></code></pre></div></div></li>
<li><p>Install dependencies:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install cmake ninja</span>
<span id="cb6-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span>
<span id="cb6-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install mkl-static mkl-include</span></code></pre></div></div></li>
<li><p>Make triton:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XPU</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for Intel GPU support</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> triton</span></code></pre></div></div></li>
<li><p>Set environment variables for PyTorch build:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> gcc<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span></span>
<span id="cb8-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> g++<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span></span>
<span id="cb8-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">REL_WITH_DEB_INFO</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_ROCM</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-6"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_MKLDNN</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_MKL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-8"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_ROCM</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDNN</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-10"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_FBGEMM</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-11"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_NNPACK</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-12"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_QNNPACK</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-13"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_NCCL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-14"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">BUILD_CAFFE2_OPS</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-16"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">BUILD_TEST</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-17"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_DISTRIBUTED</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-18"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_NUMA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb8-19"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_MPI</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-20"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XPU</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-21"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XCCL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb8-22"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">INTEL_MKL_DIR</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$MKLROOT</span></span>
<span id="cb8-23"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_AOT_DEVLIST</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pvc'</span></span>
<span id="cb8-24"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">TORCH_XPU_ARCH_LIST</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pvc'</span></span>
<span id="cb8-25"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">OCLOC_VERSION</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>24.39.1</span>
<span id="cb8-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> gcc</span>
<span id="cb8-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> g++</span></code></pre></div></div></li>
<li><p>Build PyTorch (takes ~ 30 mins):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py bdist_wheel <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tee</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torch-build-whl-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tstamp</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.log"</span></span>
<span id="cb9-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install dist/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.whl</span>
<span id="cb9-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ..</span></code></pre></div></div></li>
<li><p>[Optional] Install {<code>torchvision</code>, <code>torchaudio</code>, <code>torchdata</code>} with no dependencies:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install torchvision torchaudio <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--no-deps</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--index-url</span> https://download.pytorch.org/whl/xpu</span>
<span id="cb10-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install torchdata <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--no-deps</span></span></code></pre></div></div></li>
</ol>
</section>
<section id="intel-libraries" class="level3">
<h3 class="anchored" data-anchor-id="intel-libraries">Intel Libraries</h3>
<ol type="1">
<li><p><a href="https://github.com/intel/intel-extension-for-pytorch">intel/<code>intel-extension-for-pytorch</code></a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/intel/intel-extension-for-pytorch</span>
<span id="cb11-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> intel-extension-for-pytorch</span>
<span id="cb11-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> checkout xpu-main</span>
<span id="cb11-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> submodule sync</span>
<span id="cb11-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> submodule update <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--init</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--recursive</span></span>
<span id="cb11-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span>
<span id="cb11-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--upgrade</span> pip setuptools wheel build black flake8</span>
<span id="cb11-8"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">MAX_JOBS</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>48 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> gcc<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> g++<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">INTELONEAPIROOT</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ONEAPI_ROOT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py bdist_wheel <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tee</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ipex-build-whl-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tstamp</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.log"</span></span>
<span id="cb11-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install dist/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.whl</span>
<span id="cb11-10"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ..</span></code></pre></div></div></li>
<li><p><a href="https://github.com/intel/torch-ccl">intel/<code>torch-ccl</code></a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/intel/torch-ccl</span>
<span id="cb12-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> torch-ccl</span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> checkout c27ded5</span>
<span id="cb12-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> submodule sync</span>
<span id="cb12-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> submodule update <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--init</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--recursive</span></span>
<span id="cb12-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># see:</span></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># https://github.com/intel/torch-ccl/blob/c27ded5190a6b115ec68c7a8c28f40cfe7f0a32a/version.txt</span></span>
<span id="cb12-9"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ONECCL_BINDINGS_FOR_PYTORCH_BACKEND</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>xpu <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">INTELONEAPIROOT</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ONEAPI_ROOT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_SYSTEM_ONECCL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ON <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">COMPUTE_BACKEND</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dpcpp <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py bdist_wheel <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tee</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torch-ccl-build-whl-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tstamp</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.log"</span></span>
<span id="cb12-10"></span>
<span id="cb12-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install dist/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.whl</span>
<span id="cb12-12"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ..</span></code></pre></div></div></li>
</ol>
</section>
<section id="mpi4py" class="level3">
<h3 class="anchored" data-anchor-id="mpi4py"><code>mpi4py</code></h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/mpi4py/mpi4py</span>
<span id="cb13-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> mpi4py</span>
<span id="cb13-3"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mpicc <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mpicxx <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py build <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tee</span> build.log</span>
<span id="cb13-4"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mpicc <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mpicxx <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py install <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tee</span> install.log</span>
<span id="cb13-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ..</span></code></pre></div></div>
</section>
<section id="h5py" class="level3">
<h3 class="anchored" data-anchor-id="h5py"><code>h5py</code></h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">module</span> load hdf5</span>
<span id="cb14-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/h5py/h5py</span>
<span id="cb14-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> h5py</span>
<span id="cb14-4"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mpicc <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mpicxx <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">HDF5_MPI</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ON"</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--no-binary</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>h5py .</span>
<span id="cb14-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">h5cc</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-showconfig</span></span></code></pre></div></div>
</section>
<section id="torch-ao" class="level3">
<h3 class="anchored" data-anchor-id="torch-ao">torch / <code>ao</code></h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/pytorch/ao</span>
<span id="cb15-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ao</span>
<span id="cb15-3"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XPU</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XCCL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py bdist_wheel <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tee</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torchao-build-whl-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tstamp</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.log"</span></span>
<span id="cb15-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install dist/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.whl</span>
<span id="cb15-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ../</span></code></pre></div></div>
</section>
<section id="torchtune" class="level3">
<h3 class="anchored" data-anchor-id="torchtune">TorchTune</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/pytorch/torchtune</span>
<span id="cb16-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> torchtune</span>
<span id="cb16-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"."</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--require-virtualenv</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--verbose</span></span>
<span id="cb16-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tune</span> download meta-llama/Meta-Llama-3.1-8B-Instruct <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--output-dir</span> ~/torchtune_anl2/out_dir <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--ignore-patterns</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"original/consolidated.00.pth"</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--hf-token</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>hf-token<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb16-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ../</span></code></pre></div></div>
</section>
</section>
<section id="verify-installation" class="level2">
<h2 class="anchored" data-anchor-id="verify-installation">‚úÖ Verify Installation</h2>
<ul>
<li><p>Command:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'import torch; print(torch.__file__); print(*torch.__config__.show().split("\n"), sep="\n") ; print(f"{torch.__version__=}"); print(f"{torch.xpu.is_available()=}"); print(f"{torch.xpu.device_count()=}") ; import torch.distributed; print(f"{torch.distributed.is_xccl_available()=}"); import torch; import intel_extension_for_pytorch as ipex; print(f"{torch.__version__=}"); print(f"{ipex.__version__=}"); import oneccl_bindings_for_pytorch as oneccl_bpt; print(f"{oneccl_bpt.__version__=}") ; [print(f"[{i}]: {torch.xpu.get_device_properties(i)}") for i in range(torch.xpu.device_count())]'</span></span></code></pre></div></div></li>
<li><p>Output:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> python3 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'import torch; print(torch.__file__); print(*torch.__config__.show().split("\n"), sep="\n") ; print(f"{torch.__version__=}"); print(f"{torch.xpu.is_available()=}"); print(f"{torch.xpu.device_count()=}") ; import torch.distributed; print(f"{torch.distributed.is_xccl_available()=}"); import torch; import intel_extension_for_pytorch as ipex; print(f"{torch.__version__=}"); print(f"{ipex.__version__=}"); import oneccl_bindings_for_pytorch as oneccl_bpt; print(f"{oneccl_bpt.__version__=}") ; [print(f"[{i}]: {torch.xpu.get_device_properties(i)}") for i in range(torch.xpu.device_count())]'</span></span>
<span id="cb18-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/flare/datascience/foremans/miniconda/2025-06-15/lib/python3.12/site-packages/torch/__init__.py</span></span>
<span id="cb18-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">PyTorch</span> built with:</span>
<span id="cb18-4">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> GCC 13.3</span>
<span id="cb18-5">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> C++ Version: 201703</span>
<span id="cb18-6">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> Intel<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">oneAPI</span> Math Kernel Library Version 2025.0.1-Product Build 20241031 for Intel<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">64</span> architecture applications</span>
<span id="cb18-7">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> Intel<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">MKL-DNN</span> v3.7.1 <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Git</span> Hash 8d263e693366ef8db40acc569cc7d8edf644556d<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-8">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> OpenMP 201511 <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">a.k.a.</span> OpenMP 4.5<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-9">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> LAPACK is enabled <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">usually</span> provided by MKL<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-10">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> NNPACK is enabled</span>
<span id="cb18-11">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> CPU capability usage: AVX512</span>
<span id="cb18-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">XPU</span> backend  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-</span> Build settings: BLAS_INFO=mkl, BUILD_TYPE=Debug, COMMIT_SHA=655b3b14ffba4ae73e26a63b4289329e8d160a6f, CXX_COMPILER=/opt/aurora/24.347.0/spack/unified/0.9.2/install/linux-sles15-x86_64/gcc-13.3.0/gcc-13.3.0-4enwbrb/bin/g++, CXX_FLAGS= <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fvisibility-inlines-hidden</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DUSE_PTHREADPOOL</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DUSE_KINETO</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DLIBKINETO_NOCUPTI</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DLIBKINETO_NOROCTRACER</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DLIBKINETO_NOXPUPTI</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>OFF <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DUSE_FBGEMM</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DUSE_PYTORCH_QNNPACK</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DUSE_XNNPACK</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DSYMBOLICATE_MOBILE_DEBUG_HANDLE</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-O2</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fPIC</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DC10_NODEPRECATED</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wall</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wextra</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Werror</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>return-type <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Werror</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>non-virtual-dtor <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Werror</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>range-loop-construct <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Werror</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>bool-operation <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wnarrowing</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-missing-field-initializers</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-unknown-pragmas</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-unused-parameter</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-strict-overflow</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-strict-aliasing</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-stringop-overflow</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wsuggest-override</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-psabi</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-error</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>old-style-cast <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fdiagnostics-color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>always <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-faligned-new</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-maybe-uninitialized</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fno-math-errno</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fno-trapping-math</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Werror</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>format <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-dangling-reference</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-error</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>dangling-reference <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-DUSE_XPU</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-Wno-stringop-overflow,</span> LAPACK_INFO=mkl, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, TORCH_VERSION=2.8.0, USE_CUDA=0, USE_CUDNN=OFF, USE_CUSPARSELT=OFF, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_GLOO=ON, USE_MKL=ON, USE_MKLDNN=1, USE_MPI=1, USE_NCCL=OFF, USE_NNPACK=1,USE_OPENMP=ON, USE_ROCM=0, USE_ROCM_KERNEL_ASSERT=OFF, USE_XCCL=1, USE_XPU=1,</span>
<span id="cb18-13"></span>
<span id="cb18-14"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">torch.__version__=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2.8.0a0+git655b3b1'</span></span>
<span id="cb18-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">torch.xpu.is_available()</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">=True</span></span>
<span id="cb18-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">torch.xpu.device_count()</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">=12</span></span>
<span id="cb18-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">torch.distributed.is_xccl_available()</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">=True</span></span>
<span id="cb18-18"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[W615</span> 14:52:10.420018164 OperatorEntry.cpp:217] Warning: Warning only once for all operators,  other operators may also be overridden.</span>
<span id="cb18-19">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Overriding</span> a previously registered kernel for the same operator and the same dispatch key</span>
<span id="cb18-20">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">operator:</span> aten::geometric_<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Tensor</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">a!</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">self,</span> float p, <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>, Generator<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">?</span> generator=None<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> Tensor<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">a!</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-21">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">registered</span> at /lus/flare/projects/datascience/foremans/AuroraBuilds/2025-06-15/pytorch/build/aten/src/ATen/RegisterSchema.cpp:6</span>
<span id="cb18-22">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dispatch</span> key: XPU</span>
<span id="cb18-23">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">previous</span> kernel: registered at /lus/flare/projects/datascience/foremans/AuroraBuilds/2025-06-15/pytorch/aten/src/ATen/VmapModeRegistrations.cpp:37</span>
<span id="cb18-24">       <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">new</span> kernel: registered at /lus/flare/projects/datascience/foremans/AuroraBuilds/2025-06-15/intel-extension-for-pytorch/build/Release/csrc/gpu/csrc/gpu/xpu/ATen/RegisterXPU_0.cpp:186 <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"> operator()</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-25"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">torch.__version__=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2.8.0a0+git655b3b1'</span></span>
<span id="cb18-26"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ipex.__version__=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2.8.10+git57bb68a'</span></span>
<span id="cb18-27"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">oneccl_bpt.__version__=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2.8.0+xpu'</span></span>
<span id="cb18-28"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[0]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-29"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[1]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-30"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[2]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-31"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[3]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-32"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[4]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-33"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[5]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-34"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[6]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-35"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[7]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-36"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[8]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-37"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[9]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-38"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[10]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-39"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[11]:</span> _XpuDeviceProperties<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) Data Center GPU Max 1550'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">platform_name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Intel(R) oneAPI Unified Runtime over Level-Zero'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gpu'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">driver_version</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'1.6.32567+18'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">total_memory</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>65536MB, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_compute_units</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_eu_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>448, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpu_subslice_count</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>56, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_work_group_size</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1024, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">max_num_sub_groups</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>64, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sub_group_sizes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[16 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">32],</span> has_fp16=1, has_fp64=1, has_atomic64=1<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb18-40"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">took:</span> 0h:00m:21s</span></code></pre></div></div></li>
</ul>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{foreman2025,
  author = {Foreman, Sam},
  title = {üèóÔ∏è {Building} {PyTorch} 2.8 from {Source} on {Aurora}},
  date = {2025-06-14},
  url = {https://samforeman.me/posts/2025/06/14/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-foreman2025" class="csl-entry quarto-appendix-citeas">
Foreman, Sam. 2025. <span>‚ÄúüèóÔ∏è Building PyTorch 2.8 from Source on
Aurora.‚Äù</span> June 14, 2025. <a href="https://samforeman.me/posts/2025/06/14/">https://samforeman.me/posts/2025/06/14/</a>.
</div></div></section></div> ]]></description>
  <category>pytorch</category>
  <category>Aurora</category>
  <guid>https://samforeman.me/posts/2025/06/14/</guid>
  <pubDate>Sat, 14 Jun 2025 04:00:00 GMT</pubDate>
</item>
<item>
  <title>üßú‚Äç‚ôÄÔ∏è Mermaid</title>
  <dc:creator>Sam Foreman</dc:creator>
  <link>https://samforeman.me/posts/2025/06/02/</link>
  <description><![CDATA[ 

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TC329HJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->




<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    subgraph D["`Data`"]
        direction TB
        x("`x‚ÇÄ`")
        x1("`x‚ÇÅ`")
        x2("`x‚ÇÇ`")
    end
    direction LR
    subgraph G0["`GPU0`"]
        direction LR
        subgraph N0["`NN`"]
        end
        L0["`L0`"]
    end
    subgraph G1["`GPU1`"]
        direction LR
        subgraph N1["`NN`"]
        end
        L1["`L1`"]
    end
    subgraph G2["`GPU2`"]
        direction LR
        subgraph N2["`NN`"]
        end
        L2["`L2`"]
    end
    %%subgraph AR["`Average Grads`"]
    %%    direction LR
    %%    ar("`(1/N) ‚àë g‚Çô`")
    %%    %%ar --&gt; bc
    %%end
    subgraph AR["`&amp;nbsp;`"]
        direction TB
        ar("`Avg Grads&lt;br&gt;(1/N) ‚àë g‚Çô`")
        %% bc("`Update Weights`")
    end
    %%subgraph UW["Update Weights"]
    %%    bc("`Update Weights`")
    %%end
    x --&gt; G0
    x1 --&gt; G1
    x2 --&gt; G2
    N0 --&gt; L0
    N1 --&gt; L1
    N2 --&gt; L2
    L0 -.-&gt; ar
    L1 -.-&gt; ar
    L2 -.-&gt; ar
    %% ar -.-&gt; bc
    %% bc -.-&gt; 
    %%bc -.-&gt; G1
    %%bc -.-&gt; G2
    %%G0 -.-&gt; ar
    %%G1 -.-&gt; ar
    %%G2 -.-&gt; ar
    %%G0 &lt;-.- bc
    %%bc -.-&gt; G0
    %%bc -.-&gt; G1
    %%bc -.-&gt; G2
    %%G2 -.-&gt; ar
    %%X1 --&gt;|"`x‚ÇÄ W‚ÇÄ &lt;br&gt;+ x‚ÇÅ W‚ÇÅ`"|X2

classDef block fill:#CCCCCC02,stroke:#838383,stroke-width:1px,color:#838383
classDef grey fill:#cccccc,stroke:#333,stroke-width:1px,color:#000
classDef red fill:#ff8181,stroke:#333,stroke-width:1px,color:#000
classDef orange fill:#FFC47F,stroke:#333,stroke-width:1px,color:#000
classDef yellow fill:#FFFF7F,stroke:#333,stroke-width:1px,color:#000
classDef green fill:#98E6A5,stroke:#333,stroke-width:1px,color:#000
classDef blue fill:#7DCAFF,stroke:#333,stroke-width:1px,color:#000
classDef purple fill:#FFCBE6,stroke:#333,stroke-width:1px,color:#000
classDef text fill:#CCCCCC02,stroke:#838383,stroke-width:0px,color:#838383
class x,y0,L0 red
class x1,L1 green
class x2,L2 blue
class x3,ar grey
class D,N0,N1,N2,G0,G1,G2,GU block
class AR block
class bc text
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>




<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{foreman2025,
  author = {Foreman, Sam},
  title = {üßú‚Äç‚ôÄÔ∏è {Mermaid}},
  date = {2025-06-02},
  url = {https://samforeman.me/posts/2025/06/02/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-foreman2025" class="csl-entry quarto-appendix-citeas">
Foreman, Sam. 2025. <span>‚Äúüßú‚Äç‚ôÄÔ∏è Mermaid.‚Äù</span> June 2, 2025. <a href="https://samforeman.me/posts/2025/06/02/">https://samforeman.me/posts/2025/06/02/</a>.
</div></div></section></div> ]]></description>
  <category>style</category>
  <category>personal</category>
  <guid>https://samforeman.me/posts/2025/06/02/</guid>
  <pubDate>Mon, 02 Jun 2025 04:00:00 GMT</pubDate>
</item>
<item>
  <title>üì∞ Nice Headings</title>
  <dc:creator>Sam Foreman</dc:creator>
  <link>https://samforeman.me/posts/2025/06/01/</link>
  <description><![CDATA[ 

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TC329HJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->




<p>I like headings. They help organize content and make it easier to read.</p>
<p>Inspired by my neovim config, I wanted to recreate a similar style for headings in my website.</p>
<div id="fig-headings-neovim" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-headings-neovim-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-headings-neovim" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-light-theme" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-light-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../../../../assets/nvim-headings-light.png" class="lightbox" data-gallery="fig-headings-neovim" title="Figure&nbsp;1&nbsp;(a): Light Theme"><img src="https://samforeman.me/assets/nvim-headings-light.png" class="img-fluid figure-img" data-ref-parent="fig-headings-neovim"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-light-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Light Theme
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-headings-neovim" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-dark-theme" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-dark-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../../../../assets/nvim-headings-dark.png" class="lightbox" data-gallery="fig-headings-neovim" title="Figure&nbsp;1&nbsp;(b): Dark Theme"><img src="https://samforeman.me/assets/nvim-headings-dark.png" class="img-fluid figure-img" data-ref-parent="fig-headings-neovim"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-dark-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Dark Theme
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-headings-neovim-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: My neovim headings in light and dark themes.
</figcaption>
</figure>
</div>
<p>I think they turned out pretty well!</p>
<section id="heading-1" class="level1">
<h1>Heading 1</h1>
<section id="heading-2" class="level2">
<h2 class="anchored" data-anchor-id="heading-2">Heading 2</h2>
<section id="heading-3" class="level3">
<h3 class="anchored" data-anchor-id="heading-3">Heading 3</h3>
<section id="heading-4" class="level4">
<h4 class="anchored" data-anchor-id="heading-4">Heading 4</h4>
<section id="heading-5" class="level5">
<h5 class="anchored" data-anchor-id="heading-5">Heading 5</h5>
<section id="heading-6" class="level6">
<h6 class="anchored" data-anchor-id="heading-6">Heading 6</h6>



</section>
</section>
</section>
</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{foreman2025,
  author = {Foreman, Sam},
  title = {üì∞ {Nice} {Headings}},
  date = {2025-06-01},
  url = {https://samforeman.me/posts/2025/06/01/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-foreman2025" class="csl-entry quarto-appendix-citeas">
Foreman, Sam. 2025. <span>‚Äúüì∞ Nice Headings.‚Äù</span> June 1, 2025. <a href="https://samforeman.me/posts/2025/06/01/">https://samforeman.me/posts/2025/06/01/</a>.
</div></div></section></div> ]]></description>
  <category>style</category>
  <category>personal</category>
  <guid>https://samforeman.me/posts/2025/06/01/</guid>
  <pubDate>Sun, 01 Jun 2025 04:00:00 GMT</pubDate>
</item>
<item>
  <title>üöß Frameworks Issue with numpy &gt; 2</title>
  <dc:creator>Sam Foreman</dc:creator>
  <link>https://samforeman.me/posts/2025/05/03/</link>
  <description><![CDATA[ 

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TC329HJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->




<p>Something I just learned</p>
<p>The TensorFlow that is included in the new frameworks module (<code>aurora_nre_models_frameworks-2025.0.0</code>) was built with <code>numpy==1.26.4 (&lt; 2)</code>.</p>
<p>Unfortunately, if you then (for whatever reason) then tries to install / upgrade a package<sup>1</sup> that has <code>numpy</code> in its dependencies, e.g.:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--upgrade</span> transformers</span></code></pre></div></div>
<p>This will pull in <code>numpy &gt; 2</code>, effectively breaking the frameworks module.</p>
<p>In particular, any application that uses <a href="https://github.com/intel/intel-extension-for-pytorch"><code>intel/extension_for_pytorch</code></a>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> intel_extension_for_pytorch <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> ipex</span></code></pre></div></div>
<p>Will crash with:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">A</span> module that was compiled using NumPy 1.x cannot be run in</span>
<span id="cb3-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">NumPy</span> 2.2.5 as it may crash. To support both 1.x and 2.x</span>
<span id="cb3-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">versions</span> of NumPy, modules must be compiled with NumPy 2.0.</span>
<span id="cb3-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Some</span> module may need to rebuild instead e.g. with <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pybind11&gt;=2.12'</span>.</span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> is obviously frustrating for an application that is only using PyTorch.</span></code></pre></div></div>
<p>Following through the stack trace, I see that the error is actually coming from <a href="https://github.com/huggingface/transformers/image_transforms.py#L47">huggingface/transformers/image_transforms.py#L47</a>.</p>
<p>Digging around a bit more I found there is a flag in <code>transformers</code> that allows you to bypass the entire <code>import tensorflow as tf</code> logic:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_TORCH</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span></code></pre></div></div>
<p>which not only prevents things from crashing with <code>numpy &gt; 2</code>, but is also noticeably quicker.</p>
<section id="reinstall-modules-built-with-numpy-2" class="level2">
<h2 class="anchored" data-anchor-id="reinstall-modules-built-with-numpy-2">Reinstall Modules built with <code>numpy &lt; 2</code></h2>
<p>In addition to <code>tensorflow</code>, it seems that: { <code>jax</code>, <code>jaxlib</code>, <code>ml-dtypes</code>, <code>opt-einsum</code>, <code>scipy</code> } were <em>all</em> built with <code>numpy &lt; 2</code>, and so need to be rebuilt after upgrading numpy.</p>
<p>To do so:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--upgrade</span>  numpy jax jaxlib ml-dtypes opt-einsum scipy transformers</span></code></pre></div></div>
<p>‚úÖ Now, we‚Äôre able to successfully:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#[üêç aurora_nre_models_frameworks-2025.0.0](üëª aurora_nre_models_frameworks-2025.0.0)</span></span>
<span id="cb6-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#[05/03/25 @ 12:12:29][x4515c7s4b0n0][/f/d/f/p/s/ezpz][üå± update-utils][üì¶ü§∑‚úì] [‚è±Ô∏è 25s]</span></span>
<span id="cb6-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_TORCH</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1 <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'import numpy as np; print(np.__version__) ; import ezpz '</span></span>
<span id="cb6-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">2.2.5</span></span>
<span id="cb6-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[W503</span> 12:12:34.201673197 OperatorEntry.cpp:155] Warning: Warning only once for all operators,  other operators may also be overridden.</span>
<span id="cb6-6">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Overriding</span> a previously registered kernel for the same operator and the same dispatch key</span>
<span id="cb6-7">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">operator:</span> aten::_cummax_helper<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Tensor</span> self, Tensor<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">a!</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">values,</span> Tensor<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">b!</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">indices,</span> int dim<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb6-8">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">registered</span> at /build/pytorch/build/aten/src/ATen/RegisterSchema.cpp:6</span>
<span id="cb6-9">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dispatch</span> key: XPU</span>
<span id="cb6-10">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">previous</span> kernel: registered at /build/pytorch/build/aten/src/ATen/RegisterCPU.cpp:30476</span>
<span id="cb6-11">       <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">new</span> kernel: registered at /build/intel-pytorch-extension/build/Release/csrc/gpu/csrc/aten/generated/ATen/RegisterXPU.cpp:2971 <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"> operator()</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb6-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[2025-05-03</span> 12:13:18]<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">W</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">][</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">utils/_logger:68:ezpz</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span> Unable to import deepspeed. Please install it to use DeepSpeed features.</span>
<span id="cb6-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">took:</span> 0h:00m:48s</span></code></pre></div></div>
</section>
<section id="profiles-and-timing-comparisons" class="level2">
<h2 class="anchored" data-anchor-id="profiles-and-timing-comparisons">Profiles and Timing Comparisons</h2>
<p>Below we present timing profiles obtained from</p>
<ul>
<li><a href="https://github.com/sharkdp/hyperfine"><code>hyperfine</code></a>: A command-line benchmarking tool</li>
<li><a href="https://github.com/joerick/pyinstrument"><code>pyinstrument</code></a>: A call stack profiler for Python</li>
</ul>
<p>Below we present the profiles obtained by the usual mechanism, i.e.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">module</span> load frameworks</span>
<span id="cb7-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> venv <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--system-site-packages</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"venvs/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basename</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${CONDA_PREFIX})</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb7-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">source</span> venvs/<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basename</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${CONDA_PREFIX})</span>/bin/activate</span>
<span id="cb7-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"git+https://github.com/saforem2/ezpz"</span></span></code></pre></div></div>
<section id="default-behavior" class="level3">
<h3 class="anchored" data-anchor-id="default-behavior">DEFAULT BEHAVIOR</h3>
<section id="bash-profile-hyperfine" class="level5">
<h5 class="anchored" data-anchor-id="bash-profile-hyperfine">Bash Profile (<code>hyperfine</code>)</h5>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> hyperfine <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--max-runs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>10 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>zsh <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--show-output</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ezpz_init() { $(which python3) -c "import ezpz" }; ezpz_init'</span></span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...[clipped]...</span></span>
<span id="cb8-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Time</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mean</span> ¬± œÉ<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>     10.754 s ¬±  0.122 s    [User: 14.574 s, System: 12.795 s]</span>
<span id="cb8-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Range</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">min</span> ‚Ä¶ max<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>   10.467 s ‚Ä¶ 10.910 s    10 runs</span></code></pre></div></div>
</section>
<section id="python-profile-pyinstrument" class="level4">
<h4 class="anchored" data-anchor-id="python-profile-pyinstrument">Python Profile (<code>pyinstrument</code>)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> pyinstrument <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'import ezpz'</span></span>
<span id="cb9-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...[clipped]...</span></span>
<span id="cb9-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">12.021</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  ezpz/__init__.py:1</span>
<span id="cb9-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îú‚îÄ</span> 8.624 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  ezpz/dist.py:1</span>
<span id="cb9-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>  ‚îî‚îÄ 8.542 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  intel_extension_for_pytorch/__init__.py:1</span>
<span id="cb9-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>        [206 frames hidden]  intel_extension_for_pytorch, transfor...</span>
<span id="cb9-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>           0.247 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  torch/utils/_sympy/functions.py:1</span>
<span id="cb9-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>           ‚îî‚îÄ 0.241 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  sympy/__init__.py:1</span>
<span id="cb9-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>              ‚îî‚îÄ 0.126 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  sympy/polys/__init__.py:1</span></code></pre></div></div>
</section>
</section>
<section id="with-use_torch1-and-numpy2.2.5" class="level3">
<h3 class="anchored" data-anchor-id="with-use_torch1-and-numpy2.2.5">WITH <code>USE_TORCH=1</code> and <code>numpy==2.2.5</code></h3>
<p>Below we present the profiles and timing measurements obtained:</p>
<ol type="1">
<li><p>After upgrading <code>numpy==2.25</code></p></li>
<li><p>Skipping the <code>import tensorflow as tf</code> logic in <code>transformers</code> by specifying <code>USE_TORCH=1</code>, explicitly.</p></li>
</ol>
<section id="bash-profile-hyperfine-1" class="level4">
<h4 class="anchored" data-anchor-id="bash-profile-hyperfine-1">Bash Profile (<code>hyperfine</code>)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> hyperfine <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--max-runs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>10 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--shell</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>zsh <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--show-output</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ezpz_init() { USE_TORCH=1 $(which python3) -c "import ezpz" }; ezpz_init'</span></span>
<span id="cb10-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...[clipped]...</span></span>
<span id="cb10-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Time</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mean</span> ¬± œÉ<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>      7.491 s ¬±  0.162 s    [User: 12.130 s, System: 11.940 s]</span>
<span id="cb10-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Range</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">min</span> ‚Ä¶ max<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>    7.311 s ‚Ä¶  7.883 s    10 runs</span></code></pre></div></div>
</section>
<section id="python-profile-pyinstrument-1" class="level4">
<h4 class="anchored" data-anchor-id="python-profile-pyinstrument-1">Python Profile (<code>pyinstrument</code>)</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> USE_TORCH=1 pyinstrument <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'import ezpz'</span></span>
<span id="cb11-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...[clipped]...</span></span>
<span id="cb11-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">8.478</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  ezpz/__init__.py:1</span>
<span id="cb11-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îú‚îÄ</span> 5.109 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  ezpz/dist.py:1</span>
<span id="cb11-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>  ‚îî‚îÄ 5.016 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  intel_extension_for_pytorch/__init__.py:1</span>
<span id="cb11-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>        [174 frames hidden]  intel_extension_for_pytorch, transfor...</span>
<span id="cb11-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>           0.249 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  torch/utils/_sympy/functions.py:1</span>
<span id="cb11-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>           ‚îî‚îÄ 0.241 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  sympy/__init__.py:1</span>
<span id="cb11-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">‚îÇ</span>              ‚îî‚îÄ 0.124 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>  sympy/polys/__init__.py:1</span></code></pre></div></div>
</section>
</section>
</section>
<section id="stack-trace-from-numpy-2-issue" class="level2">
<h2 class="anchored" data-anchor-id="stack-trace-from-numpy-2-issue">Stack Trace from <code>numpy &gt; 2</code> issue</h2>
<details closed="">
<summary>
Stack Trace
</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#[üêç aurora_nre_models_frameworks-2025.0.0](üëª aurora_nre_models_frameworks-2025.0.0)</span></span>
<span id="cb12-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#[05/02/25 @ 15:46:43][x4005c2s6b0n0][/f/d/f/p/s/t/2/ezpz][üå± update-utils][‚úì] [‚è±Ô∏è 19s]</span></span>
<span id="cb12-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ezpz-test</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--profile</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--tp</span> 2 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--pp</span> 4</span>
<span id="cb12-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">[W502</span> 16:00:18.739960487 OperatorEntry.cpp:155] Warning: Warning only once for all operators,  other operators may also be overridden.</span>
<span id="cb12-5">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Overriding</span> a previously registered kernel for the same operator and the same dispatch key</span>
<span id="cb12-6">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">operator:</span> aten::_cummax_helper<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Tensor</span> self, Tensor<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">a!</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">values,</span> Tensor<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">b!</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">indices,</span> int dim<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb12-7">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">registered</span> at /build/pytorch/build/aten/src/ATen/RegisterSchema.cpp:6</span>
<span id="cb12-8">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dispatch</span> key: XPU</span>
<span id="cb12-9">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">previous</span> kernel: registered at /build/pytorch/build/aten/src/ATen/RegisterCPU.cpp:30476</span>
<span id="cb12-10">       <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">new</span> kernel: registered at /build/intel-pytorch-extension/build/Release/csrc/gpu/csrc/aten/generated/ATen/RegisterXPU.cpp:2971 <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"> operator()</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span></span>
<span id="cb12-11"></span>
<span id="cb12-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">A</span> module that was compiled using NumPy 1.x cannot be run in</span>
<span id="cb12-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">NumPy</span> 2.2.5 as it may crash. To support both 1.x and 2.x</span>
<span id="cb12-14"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">versions</span> of NumPy, modules must be compiled with NumPy 2.0.</span>
<span id="cb12-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Some</span> module may need to rebuild instead e.g. with <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pybind11&gt;=2.12'</span>.</span>
<span id="cb12-16"></span>
<span id="cb12-17"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">If</span> you are a user of the module, the easiest solution will be to</span>
<span id="cb12-18"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">downgrade</span> to <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'numpy&lt;2'</span> or try to upgrade the affected module.</span>
<span id="cb12-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">We</span> expect that some modules will need time to support NumPy 2.</span>
<span id="cb12-20"></span>
<span id="cb12-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Traceback</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">most</span> recent call last<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span>  File <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/lus/flare/projects/datascience/foremans/projects/saforem2/tmp/2025-05-02-150121/ezpz/venvs/aurora_nre_models_frameworks-2025.0.0/bin/ezpz-test"</span>, line 6, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-22">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> ezpz.test import main</span>
<span id="cb12-23">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/lus/flare/projects/datascience/foremans/projects/saforem2/tmp/2025-05-02-150121/ezpz/src/ezpz/__init__.py"</span>, line 102, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-24">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> ezpz.dist import <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span></span>
<span id="cb12-25">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/lus/flare/projects/datascience/foremans/projects/saforem2/tmp/2025-05-02-150121/ezpz/src/ezpz/dist.py"</span>, line 42, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-26">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">import</span> intel_extension_for_pytorch as ipex  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># type:ignore[missingTypeStubs]</span></span>
<span id="cb12-27">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/__init__.py"</span>, line 128, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-28">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> . import xpu</span>
<span id="cb12-29">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/xpu/__init__.py"</span>, line 20, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-30">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> .utils import <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb12-31">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/xpu/utils.py"</span>, line 7, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-32">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> .. import frontend</span>
<span id="cb12-33">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/frontend.py"</span>, line 9, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-34">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> .nn import utils</span>
<span id="cb12-35">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/nn/__init__.py"</span>, line 6, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-36">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> .modules import FrozenBatchNorm2d</span>
<span id="cb12-37">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/nn/modules/__init__.py"</span>, line 11, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-38">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> ...cpu.nn.linear_fuse_eltwise import IPEXLinearEltwise</span>
<span id="cb12-39">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/cpu/nn/linear_fuse_eltwise.py"</span>, line 3, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-40">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> intel_extension_for_pytorch.nn.utils._weight_prepack import <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span></span>
<span id="cb12-41">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/nn/utils/__init__.py"</span>, line 1, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-42">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> intel_extension_for_pytorch.nn.utils import _weight_prepack</span>
<span id="cb12-43">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/nn/utils/_weight_prepack.py"</span>, line 8, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-44">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> intel_extension_for_pytorch.cpu.tpp.utils.blocked_layout import <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span></span>
<span id="cb12-45">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/cpu/tpp/__init__.py"</span>, line 2, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-46">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> . import fused_bert</span>
<span id="cb12-47">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/intel_extension_for_pytorch/cpu/tpp/fused_bert.py"</span>, line 16, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-48">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> transformers.modeling_utils import apply_chunking_to_forward</span>
<span id="cb12-49">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/lus/flare/projects/datascience/foremans/projects/saforem2/tmp/2025-05-02-150121/ezpz/venvs/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/transformers/modeling_utils.py"</span>, line 69, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-50">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> .loss.loss_utils import LOSS_MAPPING</span>
<span id="cb12-51">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/lus/flare/projects/datascience/foremans/projects/saforem2/tmp/2025-05-02-150121/ezpz/venvs/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/transformers/loss/loss_utils.py"</span>, line 21, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-52">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> .loss_deformable_detr import DeformableDetrForObjectDetectionLoss, DeformableDetrForSegmentationLoss</span>
<span id="cb12-53">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/lus/flare/projects/datascience/foremans/projects/saforem2/tmp/2025-05-02-150121/ezpz/venvs/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/transformers/loss/loss_deformable_detr.py"</span>, line 4, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-54">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> ..image_transforms import center_to_corners_format</span>
<span id="cb12-55">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/lus/flare/projects/datascience/foremans/projects/saforem2/tmp/2025-05-02-150121/ezpz/venvs/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/transformers/image_transforms.py"</span>, line 47, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-56">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">import</span> tensorflow as tf</span>
<span id="cb12-57">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/__init__.py"</span>, line 48, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-58">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow._api.v2 import __internal__</span>
<span id="cb12-59">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/_api/v2/__internal__/__init__.py"</span>, line 8, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-60">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow._api.v2.__internal__ import autograph</span>
<span id="cb12-61">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/_api/v2/__internal__/autograph/__init__.py"</span>, line 8, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-62">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow.python.autograph.core.ag_ctx import control_status_ctx <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># line: 34</span></span>
<span id="cb12-63">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/python/autograph/core/ag_ctx.py"</span>, line 21, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-64">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow.python.autograph.utils import ag_logging</span>
<span id="cb12-65">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/python/autograph/utils/__init__.py"</span>, line 17, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-66">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow.python.autograph.utils.context_managers import control_dependency_on_returns</span>
<span id="cb12-67">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/python/autograph/utils/context_managers.py"</span>, line 19, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-68">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow.python.framework import ops</span>
<span id="cb12-69">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/python/framework/ops.py"</span>, line 41, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-70">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow.python import pywrap_tfe</span>
<span id="cb12-71">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">File</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/opt/aurora/24.347.0/frameworks/aurora_nre_models_frameworks-2025.0.0/lib/python3.10/site-packages/tensorflow/python/pywrap_tfe.py"</span>, line 25, in <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>module<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-72">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> tensorflow.python._pywrap_tfe import <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb12-73"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">AttributeError:</span> _ARRAY_API not found</span>
<span id="cb12-74"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">AttributeError:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MessageFactory'</span> object has no attribute <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'GetPrototype'</span></span>
<span id="cb12-75"></span>
<span id="cb12-76"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...[clipped]...</span></span></code></pre></div></div>
</details>



</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This is a lot of packages, including: { <code>torch</code>, <code>jax</code>, <code>tensorflow</code>, <code>scipy</code>, <code>jaxlib</code>, <code>numpy</code>, <code>ml-dtypes</code>, <code>opt-einsum</code>, ‚Ä¶, }.‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{foreman2025,
  author = {Foreman, Sam},
  title = {üöß {Frameworks} {Issue} with \textless Code\textgreater numpy
    \textgreater{} 2\textless/Code\textgreater{}},
  date = {2025-05-03},
  url = {https://samforeman.me/posts/2025/05/03/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-foreman2025" class="csl-entry quarto-appendix-citeas">
Foreman, Sam. 2025. <span>‚Äúüöß Frameworks Issue with &lt;Code&gt;numpy
&gt; 2&lt;/Code&gt;.‚Äù</span> May 3, 2025. <a href="https://samforeman.me/posts/2025/05/03/">https://samforeman.me/posts/2025/05/03/</a>.
</div></div></section></div> ]]></description>
  <category>frameworks</category>
  <category>Aurora</category>
  <category>pytorch</category>
  <category>bug</category>
  <guid>https://samforeman.me/posts/2025/05/03/</guid>
  <pubDate>Sat, 03 May 2025 04:00:00 GMT</pubDate>
</item>
<item>
  <title>üî• Building PyTorch 2.6 from Source on Aurora</title>
  <dc:creator>Sam Foreman</dc:creator>
  <link>https://samforeman.me/posts/2025/04/28/</link>
  <description><![CDATA[ 

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TC329HJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->




<section id="pytorch-2.6-on-aurora" class="level2">
<h2 class="anchored" data-anchor-id="pytorch-2.6-on-aurora">PyTorch 2.6 on Aurora</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">source</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-L</span> https://bit.ly/ezpz-utils<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ezpz_setup_env</span></span>
<span id="cb1-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> g++<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb1-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> gcc<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb1-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">REL_WITH_DEB_INFO</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb1-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_ROCM</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_MKLDNN</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb1-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_MKL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb1-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_ROCM</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDNN</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_FBGEMM</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_NNPACK</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_QNNPACK</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_NCCL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-16"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">BUILD_CAFFE2_OPS</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">BUILD_TEST</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_DISTRIBUTED</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb1-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_NUMA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0</span>
<span id="cb1-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_MPI</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb1-21"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XPU</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb1-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XCCL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1</span>
<span id="cb1-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">INTEL_MKL_DIR</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$MKLROOT</span></span>
<span id="cb1-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_AOT_DEVLIST</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pvc'</span></span>
<span id="cb1-25"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">TORCH_XPU_ARCH_LIST</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pvc'</span></span>
<span id="cb1-26"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">OCLOC_VERSION</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>24.39.1</span>
<span id="cb1-27"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> gcc</span>
<span id="cb1-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># /opt/aurora/24.347.0/spack/unified/0.9.1/install/linux-sles15-x86_64/gcc-13.3.0/gcc-13.3.0-4enwbrb/bin/gcc</span></span>
<span id="cb1-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#/usr/bin/gcc</span></span>
<span id="cb1-30"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> g++</span>
<span id="cb1-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#/opt/aurora/24.347.0/spack/unified/0.9.1/install/linux-sles15-x86_64/gcc-13.3.0/gcc-13.3.0-4enwbrb/bin/g++</span></span>
<span id="cb1-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#/usr/bin/g++</span></span>
<span id="cb1-33"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/pytorch/pytorch.git</span>
<span id="cb1-34"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> pytorch</span>
<span id="cb1-35"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> checkout v2.6.0</span>
<span id="cb1-36"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> submodule update <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--init</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--recursive</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--force</span></span>
<span id="cb1-37"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make</span> triton</span>
<span id="cb1-38"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_XCCL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DEBUG</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">REL_WITH_DEB_INFO</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">USE_CUDA</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0 <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CC</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> gcc<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CXX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span> g++<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py bdist_wheel <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--verbose</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tee</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"build_whl-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${NOW}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.log"</span></span>
<span id="cb1-39"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install dist/torch-2.6.0a0+git1eba9b3-cp310-cp310-linux_x86_64.whl <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--force-reinstall</span></span>
<span id="cb1-40"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> pip install intel-extension-for-pytorch==2.6.10+xpu oneccl_bind_pt==2.6.0+xpu <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--extra-index-url</span> https://pytorch-extension.intel.com/release-whl/stable/xpu/us/</span></code></pre></div></div>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{foreman2025,
  author = {Foreman, Sam},
  title = {üî• {Building} {PyTorch} 2.6 from {Source} on {Aurora}},
  date = {2025-04-28},
  url = {https://samforeman.me/posts/2025/04/28/},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-foreman2025" class="csl-entry quarto-appendix-citeas">
Foreman, Sam. 2025. <span>‚Äúüî• Building PyTorch 2.6 from Source on
Aurora.‚Äù</span> April 28, 2025. <a href="https://samforeman.me/posts/2025/04/28/">https://samforeman.me/posts/2025/04/28/</a>.
</div></div></section></div> ]]></description>
  <category>pytorch</category>
  <category>Aurora</category>
  <guid>https://samforeman.me/posts/2025/04/28/</guid>
  <pubDate>Mon, 28 Apr 2025 04:00:00 GMT</pubDate>
</item>
</channel>
</rss>
